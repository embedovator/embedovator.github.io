(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{247:function(e,t,n){e.exports=n(535)},273:function(e,t){},275:function(e,t){},291:function(e,t){},293:function(e,t){},460:function(e,t){},534:function(e,t,n){},535:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(243),s=n.n(i),r=n(538),l=n(40),c=n(41),u=n(43),h=n(42),m=n(44),d=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.handleSignIn;return o.a.createElement("div",null,o.a.createElement("div",{className:"signintop"}),o.a.createElement("div",{className:"signin"},o.a.createElement("button",{className:"btn btn-sm",id:"signin-button",onClick:e.bind(this)},"Sign In with Blockstack")))}}]),t}(a.Component),b=n(246),f=n(96),k=n(244),p=n(147),g=(n(258),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).createTable=function(){for(var e=[],t=n.props.transitions,a=function(a){var i=[],s=n.props.hidden[t[a]],r=n.props.actionDelay[t[a]];s||(r>0?i.push(o.a.createElement("td",null,o.a.createElement(p.AwesomeButtonProgress,{type:"secondary",size:"large",loadingLabel:"patience...",resultLabel:"",releaseDelay:0,disabled:!!n.props.disabled[t[a]],onPress:function(e,o){n.props.onTransition(t[a]),setTimeout(function(){o()},r)}},t[a]))):i.push(o.a.createElement("td",null,o.a.createElement(p.AwesomeButton,{size:"large",type:"primary",disabled:!!n.props.disabled[t[a]],onPress:function(){n.props.onTransition(t[a])}},t[a])))),e.push(o.a.createElement("tr",null,i))},i=0;i<t.length;i++)a(i);return e},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("table",null,this.createTable()))}}]),t}(a.Component)),y=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).createTable=function(){for(var e=[],t=n.props.soliloquyRB.peekN(n.props.soliloquyRB.size()),a=n.props.soliloquyRB.size()-1;a>=0;a--){var i=[];i.push(o.a.createElement("td",null,"".concat(t[a]))),e.push(o.a.createElement("tr",null,i))}return e},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("table",null,this.createTable())}}]),t}(a.Component),v=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(u.a)(this,Object(h.a)(t).call(this,e));var o=n(259),i=n(260);return a.state={tick:0,workEndTick:0,brightness:30,dimRate:-.3,soliloquyRB:new o(6),hidden:{team:!0,"a simple search engine":!0,"a humble book store":!0,"a tiny social network":!0,"monetize users":!0,contribute:!0},actionDelay:{code:150,brighten:2e3,"code a simple search engine":3500,blockstack:9e3,ethereum:1e4,bitcoin:11e3,"fix legacy code":4e3,"write more lolcode":500,compile:2e3,"add another layer of abstraction":600,"hire a frontend engineer":1e3,"hire a backend engineer":1100,"hire an optimization engineer":1200,"create a simple, modern frontend":4e3,"create a robust backend":5e3,"optimization!":6e3,"monetize users":15e3},disabled:{},engineers:{frontend:0,backend:0,optimization:0},contributors:0,loan:{amount:0,interestPct:30},lastState:"home",saveEnabled:!1,contributeEndTick:0,codeXP:0,money:0,users:0,adoptionRate:1,tippingPoint:!1,worked:!1,gameData:0,fsm:new i({init:"home",transitions:[{name:"a quiet room",from:"home",to:"quiet"},{name:"work",from:"home",to:"work"},{name:"contribute",from:"home",to:"contribute"},{name:"team",from:"home",to:"team"},{name:"code a simple search engine",from:"work",to:"work"},{name:"a simple search engine",from:"work",to:"search"},{name:"a humble book store",from:"work",to:"book"},{name:"a tiny social network",from:"work",to:"social"},{name:"code for some BS temp job",from:"work",to:"bs"},{name:"back",from:["quiet","work","search","book","social","team","bs","contribute"],to:"home"},{name:"brighten",from:"home",to:"home"},{name:"code",from:"quiet",to:"quiet"},{name:"blockstack",from:"contribute",to:"contribute"},{name:"ethereum",from:"contribute",to:"contribute"},{name:"bitcoin",from:"contribute",to:"contribute"},{name:"fix legacy code",from:"bs",to:function(){return a.handleBSWork(),"bs"}},{name:"write more lolcode",from:"bs",to:function(){return a.handleBSWork(),"bs"}},{name:"compile",from:"bs",to:function(){return a.handleBSWork(),"bs"}},{name:"add another layer of abstraction",from:"bs",to:function(){return a.handleBSWork(),"bs"}},{name:"hire a frontend engineer",from:"team",to:"team"},{name:"hire a backend engineer",from:"team",to:"team"},{name:"hire an optimization engineer",from:"team",to:"team"},{name:"create a simple, modern frontend",from:"search",to:"search"},{name:"create a robust backend",from:"search",to:"search"},{name:"optimization!",from:"search",to:"search"},{name:"monetize users",from:"search",to:"search"}],methods:{onBrighten:function(){return a.handleBrightness(20)},onCode:function(){return a.handleCode()},"onHire a frontend engineer":function(){return a.handleHire("frontend")},"onHire a backend engineer":function(){return a.handleHire("backend")},"onHire an optimization engineer":function(){return a.handleHire("optimization")},"onCode a simple search engine":function(){return a.handleWork("search")},"onCode a humble book store":function(){return a.handleWork("book")},"onCode a tiny social network":function(){return a.handleWork("social")},"onCreate a simple, modern frontend":function(){return a.handleSearchWork("frontend")},"onCreate a robust backend":function(){return a.handleSearchWork("backend")},"onOptimization!":function(){return a.handleSearchWork("optimization")},"onMonetize users":function(){return a.handleMonetization()},onBlockstack:function(){return a.handleContribute("blockstack")},onEthereum:function(){return a.handleContribute("ethereum")},onBitcoin:function(){return a.handleContribute("bitcoin")}}})},a.tick=a.tick.bind(Object(f.a)(a)),a.intervalHandle=setInterval(a.tick,1e3),console.log("SAVED BASE STATE"),a.baseState=a.state,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleContribute",value:function(e){var t=this.state.codeXP,n=this.state.soliloquyRB,a=this.state.contributors,o=this.state.dimRate,i=this.state.contributeEndTick,s=this.state.tick,r=this.state.disabled;switch(e){case"blockstack":t>=500?(r[e]=!0,t-=500,n.enq("*really bad game on Blockstack goes viral*"),a+=50):(n.enq("Not enough code..."),n.enq("Need "+(500-t)+" LOC."));break;case"ethereum":t>=5e3?(r[e]=!0,t-=5e3,n.enq("VB: Thanks for everything you\u2019ve done, dad."),a+=1e3):(n.enq("Not enough code..."),n.enq("Need "+(5e3-t)+" LOC."));break;case"bitcoin":t>=5e4?(r[e]=!0,t-=5e4,a+=1e4,i=s):(n.enq("Not enough code..."),n.enq("Need "+(5e4-t)+" LOC."))}this.setState({soliloquyRB:n,codeXP:t,contributors:a,dimRate:o,contributeEndTick:i,disabled:r})}},{key:"handleBSWork",value:function(){var e=this.state.codeXP,t=this.state.money,n=this.state.soliloquyRB,a=this.state.worked;e>=10?(a=!0,t+=10,e-=10,n.enq("Unfulfilling work done. Got $10")):(n.enq("Not enough code..."),n.enq("Need "+(10-e)+" LOC.")),this.setState({codeXP:e,money:t,soliloquyRB:n,worked:a})}},{key:"handleMonetization",value:function(){var e=this.state.money,t=5*this.state.users,n=this.state.adoptionRate,a=this.state.soliloquyRB,o=this.state.users;a.enq("Made $"+t+" off of "+o+" users!"),e+=t,this.setState({money:e,adoptionRate:n-10,soliloquyRB:a})}},{key:"handleHire",value:function(e){var t=this.state.soliloquyRB,n=this.state.money,a=this.state.engineers;if(n>=100)switch(e){case"frontend":t.enq("Frontend Engineer hired at rate of $108/hr!"),a[e]+=1;break;case"backend":t.enq("Backend Engineer hired at rate of $108/hr!"),a[e]+=1;break;case"optimization":t.enq("Optimization Engineer hired at rate of $108/hr!"),a[e]+=1;break;default:t.enq("Not hiring at the moment!")}else t.enq("Too poor to hire. Need $"+(100-n)+". Consider a temp job.");this.setState({soliloquyRB:t,engineers:a,money:n})}},{key:"handleSearchWork",value:function(e){var t=this.state.engineers[e],n=this.state.money,a=this.state.optimizationLevel,o=this.state.soliloquyRB,i=this.state.disabled;if(t>=1)switch(e){case"backend":i["create a robust backend"]=!0,o.enq("This thing is built like a tank, ready for war. Now how are we going to pay for all this...?");break;case"frontend":i["create a simple, modern frontend"]=!0,o.enq("NOICE. A simple, modern frontend has been built. Soon we'll need a marketing team...");break;case"optimization":n>=-10?(o.enq("$: -10"),o.enq("Throw money and an engineer at the problem. That'll fix it."),n+=-10,a+=1):o.enq("Need more money! $"+(-10-n)+" to be exact.");break;default:o.enq("Oops. There's no work for the "+e+" position...")}else o.enq("Need "+(1-t)+" "+e+" engineers on your team!");this.setState({disabled:i,soliloquyRB:o,money:n,optimizationLevel:a})}},{key:"tick",value:function(){var e=this.state.soliloquyRB,t=this.state.tick,n=this.state.workEndTick,a=this.state.money,o=this.state.users,i=this.state.brightness,s=this.state.dimRate,r=this.state.adoptionRate,l=this.state.tippingPoint,c=this.state.disabled,u=this.state.engineers,h=this.state.loan,m=this.state.hidden,d=this.state.contributors,f=this.state.codeXP,k=this.state.contributeEndTick,p=this.state.saveEnabled;if(1===t?e.enq("Eyes are tired."):3===t?e.enq("Screen is dim."):7===t?e.enq("Can't see."):2===t&&(p=!0),d>0&&(f+=d,k>0&&(c.brighten=!0,t===k+2?e.enq("SN: I'm not in this for the glory...son."):t===k+5?e.enq("SN: I'm here to make a difference."):t===k+10?(e.enq("SN: My eyes are tired now, and I must rest..."),s+=-3):t===k+13&&e.enq("*"+d+" contributors continue BUIDLing*"))),null!==u)for(var g=0,y=Object.entries(u);g<y.length;g++){var v=y[g],q=Object(b.a)(v,2),w=q[0],S=q[1];0!==S&&(a>-5?(a+=-5*S,r<0&&(a+=r)):l?a=0:(h.amount+=1e3,e.enq("Ran out of money."),e.enq("Took a loan for "+h.amount+" @ "+h.interestPct+"% to make payroll for "+w+"...will pay interest."),e.enq("Need to start making money...the pressure is immense!"),a+=h.amount))}h.amount>0&&(a-=h.amount*h.interestPct/100/2080);this.state.engineers.frontend>0&&this.state.engineers.backend>0&&this.state.engineers.optimization>0&&(o+=r,r+=1),1===o&&(alert("Got our first user! Time to monetize on them..."),delete m["monetize users"]),o>1e4&&(l||e.enq("Reached the tipping point for number of users! We can't fail now."),l=!0),l&&(o<=0&&(o=0),a<=0&&0===n&&(n=t,c.brighten=!0),t===n+3?e.enq("Can\u2019t pay employees..."):t===n+5?e.enq("...the bank owns everything."):t===n+7?e.enq("Won't give us any more money."):t===n+10?e.enq("Lost the trust of the users."):t===n+13?e.enq("Took advantage of them."):t===n+16&&(e.enq("Can\u2019t even afford my electricity bill..."),e.enq("LPT: Reset the game and try again...this time without ever working!"),s+=-3)),(i+=s)<=0&&(i=0),this.setState({tick:this.state.tick+1,workEndTick:n,dimRate:s,brightness:i,users:o,adoptionRate:r,tippingPoint:l,money:a,codeXP:f,saveEnabled:p})}},{key:"handleBookstore",value:function(){}},{key:"handleSocialNetwork",value:function(){}},{key:"handleWork",value:function(e){var t=this.state.soliloquyRB,n=this.state.codeXP,a=this.state.money,o=this.state.hidden,i=this.state.worked;if(this.state.codeXP>=30){switch(i=!0,e){case"book":t.enq("All things start from humble beginnings. Bookstore built!"),delete o["a humble book store"],o["code a humble book store"]=!0;break;case"social":t.enq("Have we reached the tipping point yet? Tiny social network built!"),delete o["a tiny social network"],o["code a tiny social network"]=!0;break;case"search":t.enq("Simplicity at its finest. The `query` function. Simple search engine built!"),delete o["a simple search engine"],o["code a simple search engine"]=!0;break;default:t.enq(e+" built!")}t.enq("...can we make it better?"),t.enq("Got $25"),n-=25,a+=25,delete o.team}else t.enq("Not enough code..."),t.enq("Need "+(30-n)+" LOC.");this.setState({codeXP:n,money:a,soliloquyRB:t,hidden:o,worked:i})}},{key:"handleSimpleSearchEngine",value:function(e){var t=this.state.soliloquyRB,n=this.state.codeXP,a=this.state.money,o=this.state.hidden;console.log("handleSimpleSearchEngine!"),this.state.codeXP>=30?(t.enq(e+" built!"),t.enq("$: +5"),t.enq("...can we make it better?"),n-=5,a+=5,delete o.team,delete o["a simple search engine"],o["code a simple search engine"]=!0):(t.enq("Not enough code..."),t.enq("Need "+(30-n)+" LOC.")),this.setState({codeXP:n,money:a,soliloquyRB:t,hidden:o})}},{key:"handleCode",value:function(){var e=this.state.soliloquyRB,t=this.state.worked,n=this.state.codeXP,a=this.state.contributors,o=100*(a+1),i=this.state.hidden;n+=5;e.enq("lines of code: +5"),!t&&n>=o&&(a>0?(a+=1,e.enq("Another contributor joins the team")):(a+=1,i.work=!0,delete i.contribute,alert("A contributor joins the team!"))),this.setState({codeXP:n,soliloquyRB:e,contributors:a})}},{key:"handleTransition",value:function(e){"function"===typeof this.state.fsm["".concat(e)]?this.state.fsm["".concat(e)]():console.log("function '"+e+"' is invalid!")}},{key:"saveGame",value:function(){var e=this.props.userSession;this.setState({lastState:this.state.fsm.state});var t=this.state,n=this.state.fsm;delete t.fsm,console.log("Writing gameData: "+JSON.stringify(t)),e.putFile("a-dark-room.json",JSON.stringify(t)),this.setState({fsm:n})}},{key:"restoreGame",value:function(){var e=this,t=this.props.userSession;console.log("Reading gameData..."),t.getFile("a-dark-room.json").then(function(t){var n=JSON.parse(t||"[]");console.log("Restore: "+t),delete n.soliloquyRB,e.setState(n)}).finally(function(){console.log("Done restoring")})}},{key:"resetGame",value:function(){this.setState(this.baseState)}},{key:"componentDidMount",value:function(){this.restoreGame()}},{key:"handleBrightness",value:function(e){var t=this.state.brightness,n=this.state.soliloquyRB,a=this.state.saveEnabled;t+e<=0?t=0:t+e>100?t=100:t+=e,n.enq("game saved."),this.setState({brightness:t,soliloquyRB:n}),a&&this.saveGame()}},{key:"displayEngineers",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.soliloquyRB,n=this.state.users,a=this.state.engineers.frontend,i=this.state.engineers.backend,s=this.state.engineers.optimization,r=this.state.contributors,l=this.state.tippingPoint,c=this.state.loan;return o.a.createElement("div",{className:"game-area"},o.a.createElement("div",{className:"game"},o.a.createElement("button",{className:"btn btn-sm",id:"signout-button",onClick:this.props.handleSignOut.bind(this)},"logout"),o.a.createElement("button",{className:"btn btn-sm",id:"signout-button",onClick:function(){return e.resetGame()}},"reset")),o.a.createElement("div",{className:"actions"},o.a.createElement(g,{transitions:this.state.fsm.transitions(),hidden:this.state.hidden,disabled:this.state.disabled,onTransition:function(t){return e.handleTransition(t)},fsmState:this.state.fsm.state,actionDelay:this.state.actionDelay}),o.a.createElement("div",{className:"inventory"},o.a.createElement("h2",null,"Inventory:"),"$: ",this.state.money,o.a.createElement("br",null),"lines of code: ",this.state.codeXP,o.a.createElement("br",null),r>0?"contributors: "+r:"",o.a.createElement("br",null),a>0?"frontend engineer: "+a:"",o.a.createElement("br",null),i>0?"backend engineer: "+i:"",o.a.createElement("br",null),s>0?"optimization engineer: "+s:"",o.a.createElement("br",null),n>0||l?"users: "+n:"",o.a.createElement("br",null),c>0?"loan: $"+c:"")),o.a.createElement("div",{className:"soliloquy"},o.a.createElement(k.Helmet,null,o.a.createElement("style",null,"\n                            :root {\n                                --primary-lightness: ".concat(this.state.brightness,"%;\n                                }\n                            "))),o.a.createElement(y,{soliloquyRB:t})))}}]),t}(a.Component),q=n(148),w=new q.AppConfig,S=new q.UserSession({appConfig:w}),E=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleSignIn",value:function(e){e.preventDefault(),S.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),S.signUserOut(window.location.origin)}},{key:"render",value:function(){return o.a.createElement("div",{className:"site-wrapper"},o.a.createElement("div",{className:"site-wrapper-inner"},S.isUserSignedIn()?o.a.createElement(v,{userSession:S,handleSignOut:this.handleSignOut}):o.a.createElement(d,{userSession:S,handleSignIn:this.handleSignIn})))}},{key:"componentDidMount",value:function(){var e=this;S.isSignInPending()&&S.handlePendingSignIn().then(function(t){window.history.replaceState({},document.title,"/"),e.setState({userData:t})})}}]),t}(a.Component);n(533),n(534);s.a.render(o.a.createElement(r.a,null,o.a.createElement(E,null)),document.getElementById("root"))}},[[247,1,2]]]);
//# sourceMappingURL=main.4d881348.chunk.js.map